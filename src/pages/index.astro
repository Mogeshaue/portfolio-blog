---
import { getCollection } from "astro:content";
import PageLayout from "@layouts/PageLayout.astro";
import ArrowCard from "@components/ArrowCard";
import { SITE, SOCIALS } from "@consts";
import TwinklingStars from "@components/TwinklingStars.astro";
import MeteorShower from "@components/MeteorShower.astro";
import { CanvasRevealEffect } from "@/components/ui/canvas-reveal-effect";
import { Boxes } from "@/components/ui/background-boxes";
import VantaBackground from "@/components/ui/vanta-background";
import DynamicBackground from "@/components/ui/dynamic-background";

const posts = (await getCollection("blog"))
  .filter(post => !post.data.draft)
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime())
  .slice(0, 3);


---

<PageLayout title="Home" description={SITE.DESCRIPTION}>

  <!-- Dynamic Background - Randomly changes on each refresh! -->
  <DynamicBackground client:only="react" />

  <!-- HERO Section -->
  <section class="relative h-screen flex items-center justify-center z-20">
    <div class="text-center p-5 z-10">
      <p class="text-lg md:text-xl font-semibold text-white opacity-75">
        Hello, I'm
      </p>
      <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold uppercase text-white">
        Mogesh
      </h1>
      <p class="text-base md:text-lg text-white opacity-75 mt-2">
        Breaking things to learn, hack, and stay ahead of patches
      </p>
      <div class="mt-6 flex flex-wrap justify-center gap-4">
        <a href="/blog" class="py-2 px-4 rounded text-sm md:text-base bg-white text-black hover:opacity-80 transition">
          Read My Blog
        </a>
        <a href="/Mogesh_M.pdf" target="_blank" class="py-2 px-4 rounded text-sm md:text-base border border-white/50 text-white hover:bg-white/10 transition">
          My Resume
        </a>
      </div>
    </div>
  </section>

  <!-- Main Content -->
  <div class="relative bg-transparent">
    <div class="mx-auto max-w-screen-sm p-6 space-y-24 pb-20">

      <!-- About Section -->
      <section class="space-y-4">
        <h2 class="text-xl font-semibold text-white">About Me</h2>
        <p class="text-white">I'm a <strong>cybersecurity enthusiast</strong> focused on <strong>web and Mobile security</strong>.</p>
        <p class="text-white">I explore systems by breaking them down uncovering logic flaws, bypassing constraints, and solving security puzzles.</p>
        <p class="text-white"><strong>What I do:</strong> I hack, analyze, and secureâ€”from web exploits to Mobile investigations always seeking creative, effective solutions.</p>
<p class="text-white"><strong>What I've done:</strong> Broken into web and Android apps by exploiting auth flaws, IPC bugs, and pulling sensitive data with Frida and custom hooks.</p>
        <p class="text-white"><strong>Currently:</strong> I'm sharpening my skills, contributing to the infosec community, and solving increasingly advanced CTF challenges.</p>
      </section>

      <!-- Blog Section -->
      <section class="space-y-4">
        <div class="flex justify-between items-center">
          <h2 class="text-xl font-semibold text-white">Recent Posts</h2>
          <a href="/blog" class="text-sm underline hover:opacity-80 text-white">
            View All
          </a>
        </div>
        <ul class="space-y-4">
          {posts.map(post => (
            <li><ArrowCard entry={post} /></li>
          ))}
        </ul>
      </section>

      <!-- Contact Section -->
      <section class="space-y-4">
        <h2 class="text-xl font-semibold text-white">Let's Connect</h2>
        <p class="text-white">You can reach out via email or any of the platforms below.</p>
        <div class="grid grid-cols-4 gap-y-3 text-white">
          {SOCIALS.map(social => (
            <>
              <div class="col-span-1 truncate">{social.NAME}</div>
              <div class="col-span-3 truncate">
                <a href={social.HREF} target="_blank" class="underline hover:opacity-80 text-white">
                  {social.TEXT}
                </a>
              </div>
            </>
          ))}
        </div>
      </section>

    </div>
  </div>
</PageLayout>
